(()=>{"use strict";var n={56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},72:n=>{var e=[];function t(n){for(var t=-1,a=0;a<e.length;a++)if(e[a].identifier===n){t=a;break}return t}function a(n,a){for(var r={},o=[],s=0;s<n.length;s++){var A=n[s],c=a.base?A[0]+a.base:A[0],l=r[c]||0,d="".concat(c," ").concat(l);r[c]=l+1;var u=t(d),p={css:A[1],media:A[2],sourceMap:A[3],supports:A[4],layer:A[5]};if(-1!==u)e[u].references++,e[u].updater(p);else{var h=i(p,a);a.byIndex=s,e.splice(s,0,{identifier:d,updater:h,references:1})}o.push(d)}return o}function i(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,i){var r=a(n=n||[],i=i||{});return function(n){n=n||[];for(var o=0;o<r.length;o++){var s=t(r[o]);e[s].references--}for(var A=a(n,i),c=0;c<r.length;c++){var l=t(r[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}r=A}}},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},208:(n,e,t)=>{t.d(e,{A:()=>s});var a=t(354),i=t.n(a),r=t(314),o=t.n(r)()(i());o.push([n.id,'/* ========================================================================== */\n/* NORMALIZE */\n/* ========================================================================== */\n\n*,\n*::before,\n*::after {\n  box-sizing: border-box;\n  font-family:\'Times New Roman\', Times, serif;\n}\n\nbody {\n  line-height: 1.5;\n  -webkit-font-smoothing: antialiased; /* Improve text rendering on macOS */\n  text-wrap: pretty;\n}\n\nimg,\npicture,\nvideo,\ncanvas,\nsvg {\n  display: block;\n  max-width: 100%;\n}\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit;\n  font-size: 100%;\n  color: inherit;\n}\n\n/* ========================================================================== */\n/* MAIN STYLING */\n/* ========================================================================== */\n\nhtml {\n  /* Custom CSS properties */\n  --standard-padding: 16px;\n  --big-padding: 32px;\n  --standard-padding: 16px;\n  --minor-padding: 6px;\n  --cell-size: 2rem;\n  --palette-accent: darkslategray;\n  --ship-border-color: rgb(20, 20, 20);\n}\n\n.invisible-out-flow {\n  display: none;\n}\n\n.invisible-in-flow {\n  visibility: hidden;\n}\n\n#setup-game-dialog,\n#end-game-dialog {\n  margin: 20vh auto auto auto;\n  width: max(40%, 275px);\n  padding: var(--big-padding);\n  border-color: var(--palette-accent); \n  border-radius: 8px;\n  box-shadow: 0px 2px 11px -3px gray;\n}\n\ndialog::backdrop {\n  background-color: #000000;\n  opacity: 0.3;\n}\n\n#setup-game-form,\n#end-game-form {\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  gap: var(--standard-padding);\n}\n\n.half-cell {\n  width: max(45%, 115px);\n}\n\n.full-cell {\n  flex: auto;\n  width: 100%;\n  text-align: center;\n}\n\n.text-center-align {\n  text-align: center;\n}\n\ninput[disabled] {\n  color: gray;\n}\n\ninput[type="checkbox"] {\n  vertical-align: -1px; /* adjusts the position of the checkboxes on the text baseline */\n  accent-color: var(--palette-accent);\n}\n\nbody {\n  margin: 0;\n  padding: 0 0 var(--big-padding) 0;\n  background: #356063;\n  background: linear-gradient(91deg, rgba(53, 96, 99, 1) 0%, rgba(51, 112, 145, 1) 58%, rgba(47, 117, 196, 1) 100%);\n}\n\nheader {\n  display: flex;\n  justify-content: space-between;\n  gap: var(--big-padding);\n  flex-wrap: no-wrap;\n  padding: var(--standard-padding) var(--big-padding);\n  height: 4rem;\n  font-size: 1.5rem;\n  background-color: var(--palette-accent);\n  color: white;\n}\n\nheader h1 {\n  font-size: inherit;\n  margin: 0;\n  letter-spacing: 2px;\n  text-transform: uppercase;\n}\n\nnav ul {\n  display: flex;\n  gap: var(--big-padding);\n  margin: 0;\n  list-style: none;\n}\n\n#setup-game-btn {\n  background-color: green;\n  border-color: white;\n  cursor: pointer;\n  width: max-content;\n}\n\n#github-link {\n  text-decoration: none;\n  color: inherit;\n}\n\n#github-link span {\n  display: inline-block; \n  width: 1rem;\n}\n\nmain {\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  padding: var(--big-padding);\n  background-color: white;\n}\n\n.player-battlefields {\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  gap: var(--big-padding);\n}\n\n#status-display-container {\n  flex: none;\n  width: 100%;\n  text-align: center;\n  position: relative;\n  left: calc(var(--cell-size) / 2);\n}\n\n#status-msg,\n#game-action-btns-row {\n  min-height: 1.5rem;\n}\n\n#game-action-btns-row button {\n  cursor: pointer;\n}\n\ntable {\n  table-layout: fixed;\n  width: min-content;\n\n  border-collapse: collapse;\n}\n\ncaption {\n  position: relative;\n  left: calc(var(--cell-size) / 2);\n}\n\nth,\ntd {\n  width: var(--cell-size);\n  height: var(--cell-size);\n  padding: 0;\n}\n\nth {\n  font-weight: normal;\n}\n\ntd {\n  border: 1px solid black;\n}\n\n.dummy-cell {\n  border: none;\n  position: relative;\n}\n\n.battlefield-btn {\n  display: block;\n  border: none;\n  width: 100%;\n  height: 100%;\n  background-color: white;\n}\n\n.empty {\n  background-color: #50a3c9;\n}\n\n.empty::before {\n  content: "•";\n  color: #4182a0;\n  font-size: 1.5rem;\n}\n\n.your-attacks .battlefield-btn:not([disabled]).empty {\n  cursor: pointer;\n}\n\n.your-attacks .battlefield-btn:not([disabled]).empty:hover,\n.your-attacks .battlefield-btn:not([disabled]).empty:focus-visible {\n  border: 2px solid black;\n  filter: brightness(97%);\n}\n\n.your-attacks .battlefield-btn:not([disabled]).empty:active {\n  filter: brightness(94%);\n}\n\n/* Table "nodes" and different types of tables */\n\n.your-attacks .is-attacked {\n  cursor: default;\n}\n\n.your-ship {\n  background-color: #5e5e5e;\n  border: 2px solid var(--ship-border-color);\n}\n\n.is-attacked {\n  background-color: #ffff99;\n}\n\n.your-ship.is-attacked {\n  background-color: rgb(255, 162, 162);\n}\n\n.your-attacks .landed-hit {\n  background-color: #CCFFCC;\n}\n\n.is-attacked::before {\n  content: "•";\n  color: darkorange;\n  font-size: 1.5rem;\n}\n\n.your-ship.is-attacked::before {\n  content: "×";\n  font-size: 1.5rem;\n  color: red;\n}\n\n.your-attacks .landed-hit {\n  border: 2px solid var(--ship-border-color);\n}\n\n.your-attacks .landed-hit::before {\n  content: "✓";\n  font-size: 1.25rem;\n  color: green;\n}\n\n.ship-node {\n  border: 2px solid blue;\n  position: absolute;\n}\n\n/* TEST */\n[data-ship-uuid="123"] {\n  width: calc(var(--cell-size) + 1px);\n  height: calc(2 * var(--cell-size) + 1px);\n  left: calc(2 * 100%);\n  top: calc(1 * 100%);\n}\n',"",{version:3,sources:["webpack://./src/style.css"],names:[],mappings:"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",sourcesContent:['/* ========================================================================== */\n/* NORMALIZE */\n/* ========================================================================== */\n\n*,\n*::before,\n*::after {\n  box-sizing: border-box;\n  font-family:\'Times New Roman\', Times, serif;\n}\n\nbody {\n  line-height: 1.5;\n  -webkit-font-smoothing: antialiased; /* Improve text rendering on macOS */\n  text-wrap: pretty;\n}\n\nimg,\npicture,\nvideo,\ncanvas,\nsvg {\n  display: block;\n  max-width: 100%;\n}\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit;\n  font-size: 100%;\n  color: inherit;\n}\n\n/* ========================================================================== */\n/* MAIN STYLING */\n/* ========================================================================== */\n\nhtml {\n  /* Custom CSS properties */\n  --standard-padding: 16px;\n  --big-padding: 32px;\n  --standard-padding: 16px;\n  --minor-padding: 6px;\n  --cell-size: 2rem;\n  --palette-accent: darkslategray;\n  --ship-border-color: rgb(20, 20, 20);\n}\n\n.invisible-out-flow {\n  display: none;\n}\n\n.invisible-in-flow {\n  visibility: hidden;\n}\n\n#setup-game-dialog,\n#end-game-dialog {\n  margin: 20vh auto auto auto;\n  width: max(40%, 275px);\n  padding: var(--big-padding);\n  border-color: var(--palette-accent); \n  border-radius: 8px;\n  box-shadow: 0px 2px 11px -3px gray;\n}\n\ndialog::backdrop {\n  background-color: #000000;\n  opacity: 0.3;\n}\n\n#setup-game-form,\n#end-game-form {\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  gap: var(--standard-padding);\n}\n\n.half-cell {\n  width: max(45%, 115px);\n}\n\n.full-cell {\n  flex: auto;\n  width: 100%;\n  text-align: center;\n}\n\n.text-center-align {\n  text-align: center;\n}\n\ninput[disabled] {\n  color: gray;\n}\n\ninput[type="checkbox"] {\n  vertical-align: -1px; /* adjusts the position of the checkboxes on the text baseline */\n  accent-color: var(--palette-accent);\n}\n\nbody {\n  margin: 0;\n  padding: 0 0 var(--big-padding) 0;\n  background: #356063;\n  background: linear-gradient(91deg, rgba(53, 96, 99, 1) 0%, rgba(51, 112, 145, 1) 58%, rgba(47, 117, 196, 1) 100%);\n}\n\nheader {\n  display: flex;\n  justify-content: space-between;\n  gap: var(--big-padding);\n  flex-wrap: no-wrap;\n  padding: var(--standard-padding) var(--big-padding);\n  height: 4rem;\n  font-size: 1.5rem;\n  background-color: var(--palette-accent);\n  color: white;\n}\n\nheader h1 {\n  font-size: inherit;\n  margin: 0;\n  letter-spacing: 2px;\n  text-transform: uppercase;\n}\n\nnav ul {\n  display: flex;\n  gap: var(--big-padding);\n  margin: 0;\n  list-style: none;\n}\n\n#setup-game-btn {\n  background-color: green;\n  border-color: white;\n  cursor: pointer;\n  width: max-content;\n}\n\n#github-link {\n  text-decoration: none;\n  color: inherit;\n}\n\n#github-link span {\n  display: inline-block; \n  width: 1rem;\n}\n\nmain {\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  padding: var(--big-padding);\n  background-color: white;\n}\n\n.player-battlefields {\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  gap: var(--big-padding);\n}\n\n#status-display-container {\n  flex: none;\n  width: 100%;\n  text-align: center;\n  position: relative;\n  left: calc(var(--cell-size) / 2);\n}\n\n#status-msg,\n#game-action-btns-row {\n  min-height: 1.5rem;\n}\n\n#game-action-btns-row button {\n  cursor: pointer;\n}\n\ntable {\n  table-layout: fixed;\n  width: min-content;\n\n  border-collapse: collapse;\n}\n\ncaption {\n  position: relative;\n  left: calc(var(--cell-size) / 2);\n}\n\nth,\ntd {\n  width: var(--cell-size);\n  height: var(--cell-size);\n  padding: 0;\n}\n\nth {\n  font-weight: normal;\n}\n\ntd {\n  border: 1px solid black;\n}\n\n.dummy-cell {\n  border: none;\n  position: relative;\n}\n\n.battlefield-btn {\n  display: block;\n  border: none;\n  width: 100%;\n  height: 100%;\n  background-color: white;\n}\n\n.empty {\n  background-color: #50a3c9;\n}\n\n.empty::before {\n  content: "•";\n  color: #4182a0;\n  font-size: 1.5rem;\n}\n\n.your-attacks .battlefield-btn:not([disabled]).empty {\n  cursor: pointer;\n}\n\n.your-attacks .battlefield-btn:not([disabled]).empty:hover,\n.your-attacks .battlefield-btn:not([disabled]).empty:focus-visible {\n  border: 2px solid black;\n  filter: brightness(97%);\n}\n\n.your-attacks .battlefield-btn:not([disabled]).empty:active {\n  filter: brightness(94%);\n}\n\n/* Table "nodes" and different types of tables */\n\n.your-attacks .is-attacked {\n  cursor: default;\n}\n\n.your-ship {\n  background-color: #5e5e5e;\n  border: 2px solid var(--ship-border-color);\n}\n\n.is-attacked {\n  background-color: #ffff99;\n}\n\n.your-ship.is-attacked {\n  background-color: rgb(255, 162, 162);\n}\n\n.your-attacks .landed-hit {\n  background-color: #CCFFCC;\n}\n\n.is-attacked::before {\n  content: "•";\n  color: darkorange;\n  font-size: 1.5rem;\n}\n\n.your-ship.is-attacked::before {\n  content: "×";\n  font-size: 1.5rem;\n  color: red;\n}\n\n.your-attacks .landed-hit {\n  border: 2px solid var(--ship-border-color);\n}\n\n.your-attacks .landed-hit::before {\n  content: "✓";\n  font-size: 1.25rem;\n  color: green;\n}\n\n.ship-node {\n  border: 2px solid blue;\n  position: absolute;\n}\n\n/* TEST */\n[data-ship-uuid="123"] {\n  width: calc(var(--cell-size) + 1px);\n  height: calc(2 * var(--cell-size) + 1px);\n  left: calc(2 * 100%);\n  top: calc(1 * 100%);\n}\n'],sourceRoot:""}]);const s=o},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t="",a=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),a&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),a&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t}).join("")},e.i=function(n,t,a,i,r){"string"==typeof n&&(n=[[null,n,void 0]]);var o={};if(a)for(var s=0;s<this.length;s++){var A=this[s][0];null!=A&&(o[A]=!0)}for(var c=0;c<n.length;c++){var l=[].concat(n[c]);a&&o[l[0]]||(void 0!==r&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=r),t&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=t):l[2]=t),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),e.push(l))}},e}},354:n=>{n.exports=function(n){var e=n[1],t=n[3];if(!t)return e;if("function"==typeof btoa){var a=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),r="/*# ".concat(i," */");return[e].concat([r]).join("\n")}return[e].join("\n")}},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},659:n=>{var e={};n.exports=function(n,t){var a=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var a="";t.supports&&(a+="@supports (".concat(t.supports,") {")),t.media&&(a+="@media ".concat(t.media," {"));var i=void 0!==t.layer;i&&(a+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),a+=t.css,i&&(a+="}"),t.media&&(a+="}"),t.supports&&(a+="}");var r=t.sourceMap;r&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(a,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}}},e={};function t(a){var i=e[a];if(void 0!==i)return i.exports;var r=e[a]={id:a,exports:{}};return n[a](r,r.exports,t),r.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var a in e)t.o(e,a)&&!t.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:e[a]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nc=void 0;var a=t(72),i=t.n(a),r=t(825),o=t.n(r),s=t(659),A=t.n(s),c=t(56),l=t.n(c),d=t(540),u=t.n(d),p=t(113),h=t.n(p),E=t(208),m={};m.styleTagTransform=h(),m.setAttributes=l(),m.insert=A().bind(null,"head"),m.domAPI=o(),m.insertStyleElement=u(),i()(E.A,m),E.A&&E.A.locals&&E.A.locals;const b=class{#n=crypto.randomUUID();#e=0;constructor(n){if("number"!=typeof n)throw new TypeError("Length must be a number");if(n<1)throw new RangeError("Length must be at least 1");this.length=n}hit(){this.#e=Math.min(this.#e+1,this.length)}isSunk(){return this.#e===this.length}get uuid(){return this.#n}};class f{static BOARD_LEN=10;#t=0;constructor(){this.board=Array.from({length:f.BOARD_LEN},()=>Array.from({length:f.BOARD_LEN},()=>({isAttacked:!1,ship:null}))),this.placedShips=new Map}#a(){this.board=Array.from({length:f.BOARD_LEN},()=>Array.from({length:f.BOARD_LEN},()=>({isAttacked:!1,ship:null}))),this.placedShips.clear(),this.#t=0}get state(){return this.board}placeShip(n,e,t,a){if(e>=f.BOARD_LEN||e<0||t>=f.BOARD_LEN||t<0)throw new RangeError("Index is out of bounds");if("h"===a){if(e+(n-1)>=f.BOARD_LEN)throw new RangeError("Ship extends off the board");for(let a=0;a<n;a++)if(null!==this.board[e+a][t].ship)throw new Error("Ship collides with another ship")}else if("v"===a){if(t+(n-1)>=f.BOARD_LEN)throw new RangeError("Ship extends off the board");for(let a=0;a<n;a++)if(null!==this.board[e][t+a].ship)throw new Error("Ship collides with another ship")}const i=new b(n);if("h"===a)for(let a=0;a<n;a++)this.board[e+a][t].ship=i;else if("v"===a)for(let a=0;a<n;a++)this.board[e][t+a].ship=i;this.placedShips.set(i.uuid,i),this.#t++}randomizeShips(){const n=new Map(this.placedShips);this.#a(),n.forEach(n=>{let e=!1;for(;!e;)try{this.placeShip(n.length,Math.floor(Math.random()*f.BOARD_LEN),Math.floor(Math.random()*f.BOARD_LEN),["h","v"][Math.floor(2*Math.random())]),e=!0}catch(n){continue}})}receiveAttack(n,e){if(n>=f.BOARD_LEN||n<0||e>=f.BOARD_LEN||e<0)throw new RangeError("Index is out of bounds");const t=this.board[n][e];if(t.isAttacked)throw new Error("This cell was already attacked");t.isAttacked=!0,t.ship&&(t.ship.hit(),t.ship.isSunk()&&this.#t--)}allShipsSunken(){return 0===this.#t}}const g=f;function C(n){return Object.assign(B(),{name:n})}function B(){return{gameBoard:new g}}let v,y,w,k=null;const x=new Set([[2,1,1,"v"],[4,6,2,"h"],[2,3,6,"h"],[3,7,5,"h"],[2,0,7,"v"],[3,2,6,"v"]]),S=new class{#i;#r;constructor(){this.#i=new Map,this.#r=0}clear(){this.#i.clear(),this.#r=0}subscribe(n,e){this.#i.has(n)||this.#i.set(n,new Set);const t=this.#i.get(n),a=this.#r;return this.#r++,t.add({id:a,callback:e}),a}unsubscribe(n,e){if(!this.#i.has(n))return;let t=this.#i.get(n);t=new Set([...t].filter(n=>n.id!==e)),this.#i.set(n,t)}publish(n,e){this.#i.has(n)&&this.#i.get(n).forEach(n=>n.callback(e))}},L=Object.freeze({TURN_CHANGE:Symbol("TURN_CHANGE"),BOARD_UPDATE:Symbol("BOARD_UPDATE"),WINNER_DECLARED:Symbol("WINNER_DECLARED")});function R(){return null!==k}function z(n){if(![1,2,null].includes(n))throw new Error("Invalid turn value");k=n,S.publish(L.TURN_CHANGE,k)}function N(n="Unnamed Person",e,t){if(R())throw new Error("A game is already in progress");v=C(n),y=t?Object.assign(B(),{calcRandomAttack:()=>{const[n,e]=Array.from({length:2},()=>Math.floor(g.BOARD_LEN*Math.random()));return[n,e]}}):C(e),w=t}function D(n){(1===n?v:y).gameBoard.randomizeShips(),S.publish(L.BOARD_UPDATE,{p1Board:v.gameBoard.state,p2Board:y.gameBoard.state})}function T(n,e){if(!R())throw new Error("A game has not started yet");const t=1===k?y:v;return t.gameBoard.receiveAttack(n,e),S.publish(L.BOARD_UPDATE,{p1Board:v.gameBoard.state,p2Board:y.gameBoard.state}),t.gameBoard.allShipsSunken()?function(){const n=1===k?v:y;S.publish(L.WINNER_DECLARED,n),z(null)}():function(){if(!R())throw new Error("A game has not started yet");k=1===k?2:1,S.publish(L.TURN_CHANGE,k)}(),t.gameBoard.state[n][e].ship?1:0}function q(){v=void 0,y=void 0,w=void 0,z(null)}const _=document.querySelector("#status-display-container"),M=_.querySelector("#status-msg"),O=_.querySelector("#game-action-btns-row");function I(n){console.log(n),M.textContent=n}const j={ships:document.querySelector("#p1-ships"),shipsCaption:document.querySelector("#p1-ships caption"),shipCells:document.querySelectorAll("#p1-ships .battlefield-btn"),attacks:document.querySelector("#p1-attacks"),attackBtns:document.querySelectorAll("#p1-attacks .battlefield-btn"),attacksCaption:document.querySelector("#p1-attacks caption")},U={ships:document.querySelector("#p2-ships"),shipsCaption:document.querySelector("#p2-ships caption"),shipCells:document.querySelectorAll("#p2-ships .battlefield-btn"),attacks:document.querySelector("#p2-attacks"),attackBtns:document.querySelectorAll("#p2-attacks .battlefield-btn"),attacksCaption:document.querySelector("#p2-attacks caption")};function Y(n){if(null===n)return;const[e,t]=1===n?[j,U]:[U,j];t.ships.classList.add("invisible-out-flow"),t.attacks.classList.add("invisible-out-flow"),e.ships.classList.remove("invisible-out-flow"),e.attacks.classList.add("invisible-out-flow")}function H(n){if(null===n)return;const[e,t]=1===n?[j,U]:[U,j];t.ships.classList.add("invisible-out-flow"),t.attacks.classList.add("invisible-out-flow"),e.ships.classList.remove("invisible-out-flow"),e.attacks.classList.remove("invisible-out-flow")}function P(n){n.attackBtns.forEach(n=>n.setAttribute("disabled",""))}async function W(n){return new Promise(e=>{setTimeout(e,n)})}S.subscribe(L.BOARD_UPDATE,function(n){[j,U].forEach(e=>{e.shipCells.forEach(t=>{const a=e===j?n.p1Board:n.p2Board,i=+t.dataset.col,r=+t.dataset.row,o=a[i][r];o.isAttacked||o.ship?t.classList.remove("empty"):t.classList.add("empty"),o.isAttacked?t.classList.add("is-attacked"):t.classList.remove("is-attacked"),o.ship?t.classList.add("your-ship"):t.classList.remove("your-ship")}),e.attackBtns.forEach(t=>{const a=e===j?n.p2Board:n.p1Board,i=+t.dataset.col,r=+t.dataset.row,o=a[i][r];o.isAttacked?t.classList.remove("empty"):t.classList.add("empty"),o.isAttacked?t.classList.add("is-attacked"):t.classList.remove("is-attacked"),o.isAttacked&&o.ship?t.classList.add("landed-hit"):t.classList.remove("landed-hit")})})}),S.subscribe(L.TURN_CHANGE,n=>{if(!R())return;const e=1===n?U:j;!function(n){n.attackBtns.forEach(n=>n.removeAttribute("disabled"))}(1===n?j:U),P(e)}),S.subscribe(L.WINNER_DECLARED,function(n){[j,U].forEach(n=>{n.ships.classList.remove("invisible-out-flow"),n.attacks.classList.remove("invisible-out-flow"),P(n)}),I((n.name?`Player "${n.name}"`:"The computer")+" has won!")}),[j.attackBtns,U.attackBtns].forEach(n=>{n.forEach(n=>{n.addEventListener("click",()=>{const e=+n.dataset.col,t=+n.dataset.row;try{I(T(e,t)?"You landed a hit!":"You missed!")}catch(n){return void I(n.message)}})})});let G=1,Z=!0;const V=document.querySelector("#swap-screen-btn");function F(){V.classList.remove("invisible-out-flow")}function $(){V.classList.add("invisible-out-flow")}S.subscribe(L.TURN_CHANGE,n=>{null!==n&&(2===n&&(Z=!1),Z||w||F())}),V.addEventListener("click",async()=>{$(),I("Swapping screens in a moment, look away!"),await W(1500);const n=1===G?2:1;H(n),G=n,I(""),2===G&&document.dispatchEvent(new CustomEvent("custom:p2ScreenVisible"))});const X={randomizer:document.querySelector("#randomize-p1-ships-btn"),showRandomizer(){this.randomizer.classList.remove("invisible-out-flow")},hideRandomizer(){this.randomizer.classList.add("invisible-out-flow")}},J={randomizer:document.querySelector("#randomize-p2-ships-btn"),showRandomizer(){this.randomizer.classList.remove("invisible-out-flow")},hideRandomizer(){this.randomizer.classList.add("invisible-out-flow")}},K={startBtn:document.querySelector("#start-attack-phase-btn"),showBtn(){this.startBtn.classList.remove("invisible-out-flow")},hideBtn(){this.startBtn.classList.add("invisible-out-flow")},btnHandlerAgainstComputer:()=>{nn=!1,X.hideRandomizer(),K.hideBtn(),I(""),H(1)},btnHandlerAgainstHuman:()=>{nn=!1,J.hideRandomizer(),K.hideBtn(),Q.dispatchEvent(new Event("click"))}},Q=document.querySelector("#swap-screen-btn");let nn=!0;function en(){Y(1),X.showRandomizer(),w?(K.showBtn(),K.startBtn.addEventListener("click",K.btnHandlerAgainstComputer)):F()}async function tn(){await W(1e3),I("The computer is thinking..."),await W(1e3),I(function(){if(!R())throw new Error("A game has not started yet");if(2!==k)throw new Error("It is not the computer's turn yet");let n,e=!1;for(;!e;){const[t,a]=y.calcRandomAttack();try{n=T(t,a)}catch(n){continue}e=!0}return n}()?"Computer landed a hit!":"Computer missed!"),await W(1e3),I("")}[X,J].forEach(n=>{n.randomizer.addEventListener("click",()=>{D(n===X?1:2)})}),document.addEventListener("custom:p2ScreenVisible",()=>{nn&&(Y(2),$(),X.hideRandomizer(),J.showRandomizer(),K.showBtn(),K.startBtn.addEventListener("click",K.btnHandlerAgainstHuman))}),function(n,e){const t=n.querySelector("#setup-game-btn"),a=n.querySelector("#setup-game-dialog"),i=a.querySelector("#setup-game-form"),r=i.querySelector("#p1-name"),o=i.querySelector("#p2-name"),s=i.querySelector("#is-p2-computer"),A=i.querySelector(".cancel-btn"),c=((n,e,t)=>{function a(){n.setCustomValidity("Please fill out the player name")}function i(){e.setCustomValidity("Please fill out the player name")}function r(){e.validity.valueMissing||""===e.value.trim()?(i(),e.reportValidity()):e.setCustomValidity("")}return n.addEventListener("input",function(){n.validity.valueMissing||""===n.value.trim()?(a(),n.reportValidity()):n.setCustomValidity("")}),t.addEventListener("change",()=>{t.checked?(e.disabled=!0,e.placeholder="N/A",e.required=!1,e.removeEventListener("input",r)):(e.disabled=!1,e.placeholder="",e.required=!0,e.addEventListener("input",r),e.validity.valueMissing&&i())}),{setErrorMsgP1Name:a}})(r,o,s);e.addEventListener("load",()=>{a.showModal(),c.setErrorMsgP1Name()}),t.addEventListener("click",()=>{a.showModal()}),i.addEventListener("submit",()=>{const n=new FormData(i),e=n.get("p1Name"),a=n.get("p2Name"),r=null!==n.get("isP2Computer");q(),N(e,a,r),function(){if(void 0===v||void 0===y)throw new Error("Players must be created first");if(R())throw new Error("A game is already in progress");[v,y].forEach(n=>{x.forEach(e=>n.gameBoard.placeShip(...e))}),S.publish(L.BOARD_UPDATE,{p1Board:v.gameBoard.state,p2Board:y.gameBoard.state}),D(1),D(2),z(1)}(),nn=!0,K.startBtn.removeEventListener("click",K.btnHandlerAgainstComputer),K.startBtn.removeEventListener("click",K.btnHandlerAgainstHuman),I(""),O.querySelectorAll("button").forEach(n=>n.classList.add("invisible-out-flow")),function(n,e){j.shipsCaption.textContent=`${n}'s Ships`,j.attacksCaption.textContent=`${n}'s Attacks`,U.shipsCaption.textContent=`${e}'s Ships`,U.attacksCaption.textContent=`${e}'s Attacks`}(e,r?"Computer":a),I("Game started! Choose your ships placement"),en(),t.textContent="Restart Game"}),A.addEventListener("click",()=>{a.close()})}(document,window),function(n){const e=n.querySelector("#end-game-dialog"),t=e.querySelector("#end-game-form"),a=t.querySelector("p"),i=t.querySelector(".cancel-btn");S.subscribe(L.WINNER_DECLARED,async()=>{await W(1e3),e.showModal()}),S.subscribe(L.WINNER_DECLARED,n=>{a.textContent=(n.name?`Player "${n.name}"`:"The computer")+" has won!"}),t.addEventListener("submit",()=>{e.close(),n.querySelector("#setup-game-dialog").showModal()}),i.addEventListener("click",()=>{e.close()})}(document),S.subscribe(L.TURN_CHANGE,n=>{w&&2===n&&tn()})})();
//# sourceMappingURL=main.bundle.js.map